{
  "$schema": "https://raw.githubusercontent.com/Liinkiing/create-larastack-app/master/schemas/rules.schema.json",
  "version": 1,
  "rules": [
    {
      "id": "backend-without-mobile-overrides",
      "when": {
        "allOf": [{ "appSelected": "backend" }, { "appNotSelected": "mobile" }]
      },
      "operations": [
        {
          "type": "remove",
          "paths": [
            "backend/database/migrations/*personal_access_tokens*",
            "backend/app/Http/Controllers/Auth/MobileAppleAuthController.php",
            "backend/app/Http/Controllers/Auth/MobileGoogleAuthController.php",
            "backend/app/Http/Controllers/Auth/MobileTokenController.php",
            "backend/app/Http/Requests/Auth/MobileAppleLoginRequest.php",
            "backend/app/Http/Requests/Auth/MobileGoogleLoginRequest.php",
            "backend/app/Services/Auth/AppleIdTokenVerifier.php",
            "backend/app/Services/Auth/GoogleIdTokenVerifier.php"
          ]
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/no-mobile/backend/app/Models/User.php",
          "to": "backend/app/Models/User.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/no-mobile/backend/routes/api.php",
          "to": "backend/routes/api.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/no-mobile/backend/database/migrations/0001_01_01_000000_create_users_table.php",
          "to": "backend/database/migrations/0001_01_01_000000_create_users_table.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/no-mobile/backend/config/services.php",
          "to": "backend/config/services.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/no-mobile/backend/.env.example",
          "to": "backend/.env.example"
        }
      ]
    },
    {
      "id": "backend-without-frontend-overrides",
      "when": {
        "allOf": [{ "appSelected": "backend" }, { "appNotSelected": "frontend" }]
      },
      "operations": [
        {
          "type": "remove",
          "paths": [
            "backend/app/Http/Controllers/Auth/OAuthController.php",
            "backend/app/Http/Controllers/Auth/AuthenticatedSessionController.php",
            "backend/app/Http/Requests/Auth/LoginRequest.php"
          ]
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/no-frontend/backend/routes/web.php",
          "to": "backend/routes/web.php"
        }
      ]
    },
    {
      "id": "backend-only-overrides",
      "when": {
        "allOf": [{ "appSelected": "backend" }, { "appNotSelected": "mobile" }, { "appNotSelected": "frontend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/backend-only/backend/routes/api.php",
          "to": "backend/routes/api.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/backend-only/backend/app/Models/User.php",
          "to": "backend/app/Models/User.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/backend-only/backend/database/migrations/0001_01_01_000000_create_users_table.php",
          "to": "backend/database/migrations/0001_01_01_000000_create_users_table.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/backend-only/backend/config/services.php",
          "to": "backend/config/services.php"
        },
        {
          "type": "copy",
          "from": ".create-larastack/overrides/backend-only/backend/.env.example",
          "to": "backend/.env.example"
        }
      ]
    },
    {
      "id": "graphql-config-all-apps",
      "when": {
        "allOf": [{ "appSelected": "frontend" }, { "appSelected": "backend" }, { "appSelected": "mobile" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/graphql/all.yml",
          "to": "graphql.config.yml"
        }
      ]
    },
    {
      "id": "graphql-config-backend-mobile",
      "when": {
        "allOf": [{ "appSelected": "backend" }, { "appSelected": "mobile" }, { "appNotSelected": "frontend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/graphql/backend-mobile.yml",
          "to": "graphql.config.yml"
        }
      ]
    },
    {
      "id": "graphql-config-backend-only",
      "when": {
        "allOf": [{ "appSelected": "backend" }, { "appNotSelected": "frontend" }, { "appNotSelected": "mobile" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/graphql/backend-only.yml",
          "to": "graphql.config.yml"
        }
      ]
    },
    {
      "id": "graphql-config-frontend-mobile",
      "when": {
        "allOf": [{ "appSelected": "frontend" }, { "appSelected": "mobile" }, { "appNotSelected": "backend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/graphql/frontend-mobile.yml",
          "to": "graphql.config.yml"
        }
      ]
    },
    {
      "id": "graphql-config-frontend-only",
      "when": {
        "allOf": [{ "appSelected": "frontend" }, { "appNotSelected": "backend" }, { "appNotSelected": "mobile" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/graphql/frontend-only.yml",
          "to": "graphql.config.yml"
        }
      ]
    },
    {
      "id": "graphql-config-mobile-only",
      "when": {
        "allOf": [{ "appSelected": "mobile" }, { "appNotSelected": "frontend" }, { "appNotSelected": "backend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/graphql/mobile-only.yml",
          "to": "graphql.config.yml"
        }
      ]
    },
    {
      "id": "opencode-no-frontend",
      "when": {
        "allOf": [{ "appSelected": "backend" }, { "appNotSelected": "frontend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/opencode/no-frontend.json",
          "to": "opencode.json"
        }
      ]
    },
    {
      "id": "opencode-no-backend",
      "when": {
        "allOf": [{ "appSelected": "frontend" }, { "appNotSelected": "backend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/opencode/no-backend.json",
          "to": "opencode.json"
        }
      ]
    },
    {
      "id": "opencode-mobile-only",
      "when": {
        "allOf": [{ "appSelected": "mobile" }, { "appNotSelected": "backend" }, { "appNotSelected": "frontend" }]
      },
      "operations": [
        {
          "type": "copy",
          "from": ".create-larastack/overrides/opencode/mobile-only.json",
          "to": "opencode.json"
        }
      ]
    }
  ]
}
